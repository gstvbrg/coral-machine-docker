#!/bin/bash
# Central configuration for Coral Machine volume setup
# This file is sourced by all installer scripts to ensure consistency

# ============================================================================
# Core Paths - Used by ALL installers
# ============================================================================
export DEPS_ROOT="/workspace/deps"
export DEPS_BIN="${DEPS_ROOT}/bin"
export DEPS_LIB="${DEPS_ROOT}/lib"
export DEPS_INCLUDE="${DEPS_ROOT}/include"
export DEPS_SHARE="${DEPS_ROOT}/share"

# Workspace paths
export WORKSPACE_ROOT="/workspace"
export CCACHE_DIR="${WORKSPACE_ROOT}/.ccache"
export BUILD_DIR="${WORKSPACE_ROOT}/build"
export SOURCE_DIR="${WORKSPACE_ROOT}/source"
export VTK_DIR="${WORKSPACE_ROOT}/vtk"

# ============================================================================
# Versions - Centralized for easy updates
# ============================================================================
export NVIDIA_HPC_VERSION="24.7"
export PARAVIEW_VERSION="6.0.0"
export CUDA_VERSION="12.5"

# ============================================================================
# Build Configuration
# ============================================================================
export BUILD_JOBS=$(nproc)
export CMAKE_BUILD_TYPE="Release"
export CMAKE_CXX_STANDARD="20"
export CCACHE_SIZE="10G"

# Default compilers for builds (can be overridden per library)
export DEFAULT_CXX_COMPILER="g++"
export DEFAULT_C_COMPILER="gcc"

# ============================================================================
# Repository URLs
# ============================================================================
export NVIDIA_SDK_URL="https://developer.download.nvidia.com/hpc-sdk/${NVIDIA_HPC_VERSION}/nvhpc_2024_247_Linux_x86_64_cuda_${CUDA_VERSION}.tar.gz"
export PARAVIEW_URL="https://www.paraview.org/files/v6.0/ParaView-${PARAVIEW_VERSION}-MPI-Linux-Python3.12-x86_64.tar.gz"
export PALABOS_REPO="https://github.com/gstvbrg/palabos-hybrid-prerelease.git"
export GEOMETRY_CENTRAL_REPO="https://github.com/nmwsharp/geometry-central.git"
export POLYSCOPE_REPO="https://github.com/nmwsharp/polyscope.git"

# ============================================================================
# User Configuration
# ============================================================================
export DEV_USER_UID=1000
export DEV_USER_GID=1000

# ============================================================================
# Feature Flags - Enable/disable components
# ============================================================================
export INSTALL_NVIDIA_HPC=true
export INSTALL_PARAVIEW=true
export INSTALL_PALABOS=true
export INSTALL_GEOMETRY_CENTRAL=true
export INSTALL_POLYSCOPE=true
export INSTALL_EIGEN3=true
export INSTALL_GL_HEADERS=true

# ============================================================================
# Marker Files - For idempotent installation
# ============================================================================
export MARKER_DIR="${DEPS_ROOT}/.installed"